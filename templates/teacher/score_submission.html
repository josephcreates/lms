{% extends "teacher/base_teacher.html" %}
{% block title %}Score Submission{% endblock %}

{% block content %}
<div class="container mt-4">
  <h3>Score Submission</h3>
  <p><strong>Student:</strong> {{ submission.student.full_name }}</p>
  <p><strong>Assignment:</strong> {{ submission.assignment.title }}</p>
  {% if submission.filename %}
    <p><a href="{{ url_for('static', filename='uploads/assignments/' ~ submission.filename) }}" target="_blank">Download File</a></p>
  {% endif %}

  <form method="post">
    {# CSRF hidden input #}
    {% if form %}
      {{ form.hidden_tag() }}
    {% else %}
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    {% endif %}

    <div class="mb-3">
      <label class="form-label">Score (marks)</label>
      <input type="number" step="0.01" name="score" class="form-control" value="{{ submission.score or '' }}">
    </div>

    <div class="mb-3">
      <label class="form-label">Feedback</label>
      <textarea name="feedback" rows="4" class="form-control">{{ submission.feedback or '' }}</textarea>
    </div>

    <button type="submit" class="btn btn-success">Save Score</button>
    <a href="{{ url_for('teacher.view_submissions', assignment_id=submission.assignment_id) }}" class="btn btn-secondary">Back</a>
  </form>

  {% if submission.grade_letter %}
    <div class="mt-3">
      <p><strong>Assigned Grade:</strong> {{ submission.grade_letter }} ({{ submission.pass_fail }})</p>
    </div>
  {% endif %}
</div>
{% endblock %}
